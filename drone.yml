kind: pipeline
type: exec
name: CICD - Container Build

platform:
  os: linux
  arch: arm64

steps:
- name: build
  commands:
  - git clone https://github.com/gautada/dotfiles.git dotfiles
  - /usr/sbin/image-build
  - /usr/bin/podman images

- name: publish(test)
  environment:
    DOCKERIO_USERNAME:
      from_secret: username.docker.io
    DOCKERIO_PASSWORD:
      from_secret: password.docker.io
  commands:
  - pwd
  - ./dotfiles/scripts/image-name
  - ./dotfiles/scripts/image-tag test
  - ./dotfiles/scripts/image-publish test
  

trigger:
  event:
  - push
  
